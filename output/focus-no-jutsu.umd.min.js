!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self,function(){var e=t.focusNoJutsu,r=t.focusNoJutsu=n();r.noConflict=function(){return t.focusNoJutsu=e,r}}())}(this,(function(){"use strict";function t(){t=function(){return n};var n={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,n,e){t[n]=e.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{l({},"")}catch(t){l=function(t,n,e){return t[n]=e}}function f(t,n,e,r){var i=n&&n.prototype instanceof d?n:d,u=Object.create(i.prototype),a=new N(r||[]);return o(u,"_invoke",{value:k(t,e,a)}),u}function s(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var v={};function d(){}function p(){}function h(){}var y={};l(y,u,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(j([])));g&&g!==e&&r.call(g,u)&&(y=g);var w=h.prototype=d.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function E(t,n){function e(o,i,u,a){var c=s(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?n.resolve(f.__await).then((function(t){e("next",t,u,a)}),(function(t){e("throw",t,u,a)})):n.resolve(f).then((function(t){l.value=t,u(l)}),(function(t){return e("throw",t,u,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new n((function(n,o){e(t,r,n,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,e){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return O()}for(e.method=o,e.arg=i;;){var u=e.delegate;if(u){var a=b(u,e);if(a){if(a===v)continue;return a}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=s(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===v)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}function b(t,n){var e=n.method,r=t.iterator[e];if(void 0===r)return n.delegate=null,"throw"===e&&t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method)||"return"!==e&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+e+"' method")),v;var o=s(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function L(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function I(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function j(t){if(t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,o(w,"constructor",{value:h,configurable:!0}),o(h,"constructor",{value:p,configurable:!0}),p.displayName=l(h,c,"GeneratorFunction"),n.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,l(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},n.awrap=function(t){return{__await:t}},x(E.prototype),l(E.prototype,a,(function(){return this})),n.AsyncIterator=E,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var u=new E(f(t,e,r,o),i);return n.isGeneratorFunction(e)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},x(w),l(w,c,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var n=Object(t),e=[];for(var r in n)e.push(r);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=j,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function e(e,r){return u.type="throw",u.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=n,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),v},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),I(e),v}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;I(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:j(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),v}},n}function n(t,n,e,r,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void e(t)}a.done?n(c):Promise.resolve(c).then(r,o)}function e(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var u=t.apply(e,r);function a(t){n(u,o,i,a,c,"next",t)}function c(t){n(u,o,i,a,c,"throw",t)}a(void 0)}))}}function r(){return r=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},r.apply(this,arguments)}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function i(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=function(t){return Object.prototype.toString.call(t)},a=function(t){return"[object Object]"===u(t)},c=function(t){return"[object Function]"===u(t)},l=function(){return document.activeElement},f=function(t){return"string"==typeof t?(n=t,document.querySelector(n)):t;var n},s=function(t){return"Enter"===t.key||13===t.keyCode},v=function(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode},d=function(t){return"Tab"===t.key||9===t.keyCode},p=function(t){return d(t)&&!t.shiftKey},h=function(t){return d(t)&&t.shiftKey},y=function(t){var n;return t.focus(),(n=t).tagName&&"input"===n.tagName.toLowerCase()&&"function"==typeof n.select&&t.select(),!0},m=function(){var n=e(t().mark((function n(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){null==e?setTimeout((function(){return t(e&&y(e))}),0):t(y(e))})));case 1:case"end":return t.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),g=function(t,n,e,r){var o,i=n.map((function(t){return f(t)})).filter((function(t){return null!=t})),u=i[0],a=i.slice(-1)[0],c=null!==(o=f(t))&&void 0!==o?o:function(t,n){if(null==t||null==n)return null;if(t.contains(n))return t;if(n.contains(t))return n;var e=new Range;return e.setStartBefore(t),e.setEndAfter(n),e.collapsed&&(e.setStartBefore(n),e.setEndAfter(t)),e.commonAncestorContainer}(u,a);return{rootNode:c,subNodes:i,head:u,tail:a,coverNode:r?c:f(e)}},w=function(t,n){var e=Array.isArray(n.node)?n.node.map((function(t){return r({},n,{node:t})})):n;return t.concat(e)},x=function(t,n){var e=t.reduce((function(t,e){var r,o=t[0],i=t[1],u=t[2],a=t[3],c=t[4],l=t[5],s=function(t){var n;return null===(n=e.type)||void 0===n?void 0:n.includes(t)};return null!=(r=e.node)&&n.contains(f(r))||null==r?(s("keydown")&&(o=o.concat(e)),s("click")&&(i=i.concat(e)),s("focus")&&(u=u.concat(e)),s("outlist")&&(l=l.concat(e))):(s("click")&&(a=a.concat(e)),s("focus")&&(c=c.concat(e)),s("outlist")&&(l=l.concat(e))),[o,i,u,a,c,l]}),new Array(6).fill([])),r=e[0],o=e[1],i=e[2],u=e[3],a=e[4],c=e[5];return{keyExits:r,clickExits:o,focusExits:i,hasClickExits:o.length>0,hasFocusExits:i.length>0,hasKeyExits:r.length>0,clickExits_wild:u,focusExits_wild:a,outListExits:c}},E=function(t,n,e,o,i){var u,l,f=[].concat(t).filter((function(t){return null!=t})).map((function(t){return a(t)?t:{node:t}})).map((function(t){return r({},t,{type:void 0===t.type?[null==t.key?"":"keydown",null==t.node?"":"click"].filter((function(t){return""!==t})):[].concat(t.type)})})).reduce(w,[]),s=c(n)?n:!0===n?null!==(u=null===(l=f[0])||void 0===l?void 0:l.on)&&void 0!==u?u:function(){}:n;return[c(s)?{node:null,key:v,on:s,target:e?o:i,type:["keydown"]}:null].concat(f).filter((function(t){return null!=t}))},k=function(t){var n=c(t),e=n&&t((function(){})),r=n&&"[object Promise]"===u(e),o=n&&!r;return{promiseDelay:r,callbackDelay:o,commonDelay:!0===t&&!r&&!o}},b=function(){var n=e(t().mark((function n(e,r){var o,i,u,a;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e?k(e):{},i=o.promiseDelay,u=o.callbackDelay,a=o.commonDelay,!i){t.next=7;break}return t.next=4,e((function(){}));case 4:r(),t.next=16;break;case 7:if(!u){t.next=11;break}e(r),t.next=16;break;case 11:if(!a){t.next=15;break}r(),t.next=16;break;case 15:return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),L=function(t,n,e,r,o,i,u,a){if(null==t||!0===t)return o?n:u;if(c(t)){var l=t({e:a,list:e,cover:n,root:r,last:e[i],lastI:i});return null==l||!0===l?o?n:u:l}return f(t)},I=function(){function t(){this.cache=[],this.isEmpty=!0}var n=t.prototype;return n.push=function(t,n,e){this.isEmpty=!1,this.cache.push({node:t,type:n,handler:e})},n.clean=function(){this.cache=[],this.isEmpty=!0},n.addListeners=function(){this.cache.forEach((function(t){var n;return null===(n=t.node)||void 0===n?void 0:n.addEventListener(t.type,t.handler)}))},n.removeListeners=function(){this.cache.forEach((function(t){var n;return null===(n=t.node)||void 0===n?void 0:n.removeEventListener(t.type,t.handler)})),this.clean()},t}(),N=function(){function t(){this.cache=new Map}var n=t.prototype;return n.has=function(t){return this.cache.has(t)},n.push=function(t,n,e){this.has(t)||(n.addEventListener("keydown",e),this.cache.set(t,{node:n,handler:e}))},n.remove=function(t){var n=this;[].concat(t).forEach((function(t){return n.cache.get(t).node.removeEventListener("keydown",n.cache.get(t).handler)}))},t}(),j=function(){function t(){this.data=[],this.head=null,this.tail=null}var n=t.prototype;return n.update=function(t){this.data.splice(0,this.data.length),Array.prototype.push.apply(this.data,t),this.head=t[0],this.tail=t.at(-1)},n.isEmpty=function(){return 0===this.data.length},n.has=function(t){return!!this.data[t]},t}();return function(){var n,o,u=0-((arguments.length<=0?void 0:arguments[0])instanceof Array),d=0+u<0||arguments.length<=0+u?void 0:arguments[0+u],k=1+u<0||arguments.length<=1+u?void 0:arguments[1+u],O=null!==(n=2+u<0||arguments.length<=2+u?void 0:arguments[2+u])&&void 0!==n?n:{};if(!(Array.isArray(k)&&k.length>1))throw new Error("请至少传入一个数组，数组至少包含两个可聚焦元素，用来表示列表的头和尾。");var A=O.sequence,T=O.loop,_=O.next,D=O.prev,S=O.trigger,F=O.entry,P=O.exit,C=O.onEscape,G=O.onClick,M=O.onMove,K=O.cover,B=O.initialActive,J=O.correctionTarget,R=O.delayToFocus,q=O.delayToBlur,Y=O.removeListenersEachExit,U=void 0===Y||Y,$=O.removeListenersEachEnter,z=O.manual,H=O.allowSafariToFocusAfterMousedown,Q=void 0===H||H;O.demo;var V=a(K)?K:{},W=V.node,X=V.enterKey,Z=V.onEnter,tt=V.exit,nt=null!=K&&!1!==K&&!1!==W,et=nt&&(!0===K||!0===W||null==W),rt=new j,ot=[].concat(F).filter((function(t){return null!=t})).map((function(t){return a(t)?t:{node:t}})).map((function(t){var n;return r({},t,{delay:null!==(n=t.delay)&&void 0!==n?n:R,type:void 0===t.type?[null==t.key?"":"keydown",null==t.node?"":"click"].filter((function(t){return""!=t})):[].concat(t.type),onExit:!0===t.onExit?t.on:t.onExit})})).reduce(w,[]),it=0===ot.length,ut=new Set(ot.map((function(t){return c(t.onExit)?t.node:null})).filter((function(t){return null!=t})).map((function(t){return f(t)}))),at=f(S||(null===(o=ot[0])||void 0===o?void 0:o.node)),ct=[].concat(tt).filter((function(t){return null!=t})).map((function(t){return a(t)?t:{key:t}})).map((function(t){var n;return r({},t,{target:null!==(n=t.target)&&void 0!==n?n:at})})),lt=nt&&0===ct.length,ft=!1===C,st=a(_)?_:{key:_},vt=st.key,dt=st.on,pt=a(D)?D:{key:D},ht=pt.key,yt=pt.on,mt=!(null==T||T),gt=!!(vt||ht||A),wt=null!=B?B:-1,xt=-1,Et=new I,kt=!1,bt=!1,Lt=new I,It=new N;if(!z&&(Gt(),(it?[{}]:ot).some((function(t){return!t.delay})))){var Nt=g(d,k,W,et),jt=Nt.rootNode,Ot=Nt.subNodes,At=Nt.head,Tt=Nt.tail,_t=Nt.coverNode;rt.update(Ot),Ct(jt,rt.data,At,Tt,_t)}var Dt={enter:function(t){if(at=at||l(),t)return St({fromInvoke:!0},t.on,t.target,t.delay);for(var n,e=function(){var t=n.value,e=t.on,r=t.type,o=t.node,i=t.target,u=t.delay;if(null!=r&&r.some((function(t){return null==t||!1===t||"invoke"===t}))||null==o)return{v:St({fromInvoke:!0},e,i,u)}},r=i(ot);!(n=r()).done;){var o=e();if("object"==typeof o)return o.v}return St({fromInvoke:!0})},exit:function(t){var n=g(d,k,W,et),e=n.subNodes,r=n.coverNode,o=n.rootNode;if(t){var u=t.on,a=t.target;return p(f(a),u)}for(var c,l=function(){var t=c.value,n=t.on,e=t.type,r=t.target;if(null!=e&&e.some((function(t){return null==t||!1===t||"invoke"===t})))return{v:p(r,n)}},s=i(E(P,C,nt,r,at));!(c=s()).done;){var v=l();if("object"==typeof v)return v.v}function p(t,n){return rt.isEmpty()&&rt.update(e),Pt({fromInvoke:!0},n,t,!1,r,rt.data,o)}},removeListeners:function(){Et.removeListeners(),Lt.removeListeners()},removeListRelatedListeners:function(){Et.removeListeners()},removeEntryListeners:function(){Lt.removeListeners()},addEntryListeners:function(){Gt()},addListRelatedListeners:function(){var t=g(d,k,W,et),n=t.rootNode,e=t.subNodes,r=t.coverNode;rt.isEmpty()&&rt.update(e),Ct(n,rt.data,rt.head,rt.tail,r)},addForward:function(t,n){var e=null;if(c(n)){var r=g(d,k,W,et);e=n({root:r.rootNode,list:r.subNodes,head:r.head,tail:r.tail,cover:r.coverNode,curI:wt,prevI:xt})}else e=n;var o=e,i=o.node,u=o.on,a=o.key,l=o.target,s=f(i),v=f(l);It.push(t,s,(function(t){null!=a&&a(t,wt)&&(t.preventDefault(),null==u||u(),m(v))}))},removeForward:function(t){It.remove(t)},updateList:function(t){var n=t.map((function(t){return f(t)})).filter((function(t){return null!=t}));rt.update(n)},i:function(t){return rt.has(t)&&kt?(xt=wt,wt=t,null==M||M({e:{fromI:!0},prev:rt.data[xt],cur:rt.data[wt],prevI:xt,curI:wt}),y(k[wt]),t):wt}};return Dt;function St(t,n,e,r){return Ft.apply(this,arguments)}function Ft(){return Ft=e(t().mark((function n(e,r,o,i){var u,a;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=function(t,n,r){var i=L(o,t,n,r,nt,wt,n[-1===wt?0:wt],e),u=n.indexOf(i);u>-1&&(xt=wt,wt=u,null==M||M({e:e,prev:n[xt],cur:i,prevI:xt,curI:wt}),kt=!0),nt&&(i===t||u>-1)&&(bt=!0),m(i)},u=function(){var t=g(d,k,W,et),n=t.rootNode,e=t.subNodes,r=t.head,i=t.tail,u=t.coverNode;rt.update(e),z||Ct(n,rt.data,r,i,u),!1!==o&&a(u,e,n)},!bt&&!kt){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,null==r?void 0:r(e);case 6:!i?u():b(i,u);case 8:case"end":return t.stop()}}),n)}))),Ft.apply(this,arguments)}function Pt(n,r,o,i,u,a,l,f){var s;if(!kt||c(f)&&!f({e:n,prev:a[xt],cur:a[wt],prevI:xt,curI:wt}))return!1;kt=!1,null===(s=n.preventDefault)||void 0===s||s.call(n);var v=L(o,u,a,l,nt,wt,at,n);return v?function(){return d.apply(this,arguments)}():function(){return p.apply(this,arguments)}();function d(){return(d=e(t().mark((function e(){var o,c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=function(){y(v),null==M||M({e:n,prev:a[wt],cur:v,prevI:wt,curI:-1}),z||(v!==u&&Mt(),Gt())},t.next=3,null==r?void 0:r(n);case 3:return i=null!==(o=i)&&void 0!==o?o:q,t.next=6,b(i,c);case 6:t.sent&&c();case 8:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=e(t().mark((function e(){var o,c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==v){t.next=6;break}return t.next=3,null==r?void 0:r(n);case 3:return null==M||M({e:n,prev:a[wt],cur:null,prevI:wt,curI:-1}),z||(Mt(),Gt()),t.abrupt("return");case 6:if(!nt){t.next=13;break}return t.next=9,null==r?void 0:r(n);case 9:null==M||M({e:n,prev:a[wt],cur:null,prevI:wt,curI:-1}),y(u),t.next=21;break;case 13:return c=function(){at&&y(at),null==M||M({e:n,prev:a[wt],cur:null,prevI:wt,curI:-1}),z||(Mt(),Gt())},t.next=16,null==r?void 0:r(n);case 16:return i=null!==(o=i)&&void 0!==o?o:q,t.next=19,b(i,c);case 19:t.sent&&c();case 21:case"end":return t.stop()}}),e)})))).apply(this,arguments)}}function Ct(t,n,e,r,o){if(Et.isEmpty){if(null==t)throw new Error("没有找到元素 "+d+"，您可以尝试 delayToFocus 选项，等待元素 "+d+" 渲染完毕后进行聚焦。");if(null==e||null==r)throw new Error("至少需要包含两个可以聚焦的元素，如果元素需要等待渲染，您可以尝试 delayToFocus 选项。");var u=function(){return!!it||kt},a=gt?function(t,n,e,r,o,i,u,a,c,l,f){return function(s){if(s.target!==c&&f()){var v=n(),d=v[0],m=v[1],g=e()[1],w=Math.max(0,d),x=t.length;if((null!=o?o:p)(s)){var E=w+1,k=r?Math.min(x-1,E):E;k%=x,null==u||u({e:s,prev:t[w],cur:t[k],prevI:w,curI:k}),null==l||l({e:s,prev:t[w],cur:t[k],prevI:w,curI:k}),m(k),g(w),y(t[k]),s.preventDefault()}else if((null!=i?i:h)(s)){var b=w-1,L=r?Math.max(0,b):b;L=(L+x)%x,null==a||a({e:s,prev:t[w],cur:t[L],prevI:w,curI:L}),null==l||l({e:s,prev:t[w],cur:t[L],prevI:w,curI:L}),m(L),g(w),y(t[L]),s.preventDefault()}}}}(n,(function(){return[wt,function(t){return wt=t}]}),(function(){return[,function(t){return xt=t}]}),mt,vt,ht,dt,yt,o,M,u):function(t,n,e,r,o,i,u){return function(a){var c=t[0],l=t.at(-1),f=a.target;f!==i&&u()&&(p(a)?(null==e||e({e:a}),f===l&&(a.preventDefault(),n||y(c)),f===o&&(a.preventDefault(),y(c))):h(a)&&(null==r||r({e:a}),f===c&&(a.preventDefault(),n||y(l)),f===o&&(a.preventDefault(),y(l))))}}(n,mt,dt,yt,t,o,u),c=E(P,C,nt,o,at),g=x(c,t),w=g.keyExits,k=g.clickExits,b=g.focusExits,L=g.hasClickExits,I=g.hasFocusExits,N=g.hasKeyExits,j=g.clickExits_wild,O=g.focusExits_wild,A=g.outListExits,T=j.map((function(t){return[f(null==t?void 0:t.node),tt(t)]})),_=O.map((function(t){return[f(null==t?void 0:t.node),et(t)]}));!function(){Et.push(t,"focusin",F),Et.push(t,"focusout",K),t.contains(o)||null==o||(Et.push(o,"focus",q),Et.push(o,"blur",Y));Et.push(t,"keydown",(function(t){a(t),N&&function(t){if(t.target===o)return;if(ft&&v(t))return;for(var n,e=i(w);!(n=e()).done;){if(W(t,n.value))break}}(t)})),gt&&Et.push(t,"click",R);Et.push(t,"mousedown",B),L&&Et.push(t,"click",z);I&&Et.push(t,"focusin",V);_.forEach((function(t){var n=t[0],e=t[1];Et.push(n,"focus",e)})),T.forEach((function(t){var n=t[0],e=t[1];Et.push(n,"click",e)})),null!=o&&Et.push(o,"keydown",U);Et.addListeners()}();var D=!1,S=!1}function F(e){var r=e.target;if(nt&&r===o)bt=!0;else if(nt&&!1===D&&!1===bt)m(o);else{if(!1!==J&&gt&&!1===kt&&!1===D){var i,u=null!==(i=null==J?void 0:J({list:n,cover:o,root:t,last:n[wt],lastI:wt}))&&void 0!==i?i:-1===wt?n[0]:n[wt],a=f(u),c=n.findIndex((function(t){return t===a}));c>-1&&(xt=wt,wt=c,null==M||M({e:e,prev:n[xt],cur:n[wt],prevI:xt,curI:wt})),m(a)}kt=!0}}function K(e){ut.has(e.relatedTarget)||setTimeout((function(){var r=l(),u=!t.contains(r),a=r===o;if(e.target===o&&u)bt=!1;else{var c=null;(a||u)&&(c=function(e){for(var r,u=i(A);!(r=u()).done;){var a=r.value,c=a.on,l=a.target,s=a.delay;return Pt(e,c,f(l),s,o,n,t,a.if)}}(e)),!1!==c&&(a?kt=!1:u&&(kt=!1,bt=!1))}}))}function B(t){var e;D=!0,setTimeout((function(){D=!1})),(!gt||gt&&(e=n.find((function(n){return n.contains(t.target)}))))&&(kt=!0,nt&&(bt=!0),Q&&e&&void 0!==window.safari&&(y(e),t.preventDefault()))}function R(t){var e=t.target,r=n.findIndex((function(t){return t.contains(e)}));r>-1&&(xt=wt,wt=r,null==G||G({e:t,prev:n[xt],cur:n[wt],prevI:xt,curI:wt}),xt===wt&&!1!==kt||null==M||M({e:t,prev:n[xt],cur:n[wt],prevI:xt,curI:wt}))}function q(){bt=!0}function Y(){S?S=!1:bt=!1}function U(t){if(t.target===o&&bt&&!kt){if((null!=X?X:s)(t)&&!kt)return t.preventDefault(),S=!0,kt=!0,null==Z||Z(t),y(n[wt=-1===wt?0:wt]),void(null==M||M({e:t,prev:null,cur:n[wt],prevI:null,curI:wt}));for(var e,u=i(ct);!(e=u()).done;){var a=e.value,c=a.key,l=a.on,v=a.target,d=f(v);if(null!=c&&c(t,wt))return void h(t,l,d)}lt&&p(t)&&y(r)}function h(t,n,e){null==n||n(t),e&&y(e),Mt()}}function $(e,r){var i=r.node,u=r.on,a=r.target,c=r.delay,l=f(i),s=f(a);return!(null!=l&&!l.contains(e.target)||null==l)&&(Pt(e,u,s,c,o,n,t,r.if),!0)}function z(t){for(var n,e=i(k);!(n=e()).done;){if($(t,n.value))break}}function H(e,r){var i=r.node,u=r.on,a=r.target,c=r.delay,l=f(i),s=f(a);return(null==l||e.target===l)&&null!=l&&(Pt(e,u,s,c,o,n,t,r.if),!0)}function V(t){for(var n,e=i(b);!(n=e()).done;){if(H(t,n.value))break}}function W(e,r){var i=r.key,u=r.node,a=r.target,c=r.on,l=r.delay,s=f(u);return(null==s||e.target===s)&&(null!=i&&i(e,wt)?(Pt(e,c,a,l,o,n,t,r.if),!0):void 0)}function tt(t){return function(n){$(n,t)}}function et(t){return function(n){H(n,t)}}}function Gt(){if(Lt.isEmpty){for(var t,n=function(){var n=t.value,e=n.node,r=n.on,o=n.key,i=n.type,u=n.target,a=n.delay,l=n.onExit,s=n.if,v=[].concat(i),p=["keydown","focus","click"],h=f(e);function y(t){null==o||!o(t,wt)||c(s)&&!s({e:t,prev:rt.data[xt],cur:rt.data[wt],prevI:xt,curI:wt})||w(t,!0)}function m(t){c(s)&&!s({e:t,prev:rt.data[xt],cur:rt.data[wt],prevI:xt,curI:wt})||w(t)}function w(t,n){if(kt){if(c(l)){var e=g(d,k,W,et),o=e.subNodes,i=e.coverNode,f=e.rootNode;n&&t.preventDefault(),Pt(t,l,u,!1,i,o,f)}}else n&&t.preventDefault(),St(t,r,u,a),$&&!z&&Lt.removeListeners()}v.forEach((function(t){if(h&&p.includes(t)){var n="keydown"===t?y:m;Lt.push(h,t,n)}}))},e=i(ot);!(t=e()).done;)n();Lt.addListeners()}}function Mt(){lt||U&&!z&&Et.removeListeners()}}}));
//# sourceMappingURL=focus-no-jutsu.umd.min.js.map
